From c6d32888266c386d4fbfe595c7d3c076d0fff552 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=C3=98yvind=20Netland?= <oyvind@netland.name>
Date: Sun, 18 Dec 2016 18:37:15 +0100
Subject: [PATCH] add PWM to devicetree

---
 arch/arm/boot/dts/am335x-boneblack.dts | 30 ++++++++++++++++++++++++++++++
 1 file changed, 30 insertions(+)

diff --git a/arch/arm/boot/dts/am335x-boneblack.dts b/arch/arm/boot/dts/am335x-boneblack.dts
index a1b8932..a0d71f8 100644
--- a/arch/arm/boot/dts/am335x-boneblack.dts
+++ b/arch/arm/boot/dts/am335x-boneblack.dts
@@ -58,6 +58,12 @@
 			0xe4 0x00       /* lcd_hsync.lcd_hsync, OMAP_MUX_MODE0 | AM33XX_PIN_OUTPUT */
 			0xe8 0x00       /* lcd_pclk.lcd_pclk, OMAP_MUX_MODE0 | AM33XX_PIN_OUTPUT */
 			0xec 0x00       /* lcd_ac_bias_en.lcd_ac_bias_en, OMAP_MUX_MODE0 | AM33XX_PIN_OUTPUT */
+			0x190 0x01      /* P9_31 MODE1 ehrpwm0A PWM */
+			0x194 0x01      /* P9_29 MODE1 ehrpwm0B PWM */
+			0x048 0x06      /* P9_14 MODE6 ehrpwm1A PWM */
+			0x04C 0x06      /* P9_16 MODE6 ehrpwm1B PWM */
+			0x020 0x04      /* P8_19 MODE4 ehrpwm2A PWM */
+			0x024 0x04      /* P8_13 MODE4 ehrpwm2B PWM */
 		>;
 	};
 	nxp_hdmi_bonelt_off_pins: nxp_hdmi_bonelt_off_pins {
@@ -71,6 +77,30 @@
 	status = "okay";
 };
 
+&epwmss0 {
+	status = "okay";
+};
+
+&ehrpwm0 {
+	status = "okay";
+};
+
+&epwmss1 {
+	status = "okay";
+};
+
+&ehrpwm1 {
+	status = "okay";
+};
+
+&epwmss2 {
+	status = "okay";
+};
+
+&ehrpwm2 {
+	status = "okay";
+};
+
 / {
 	hdmi {
 		compatible = "ti,tilcdc,slave";
-- 
2.7.4

